{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-var-requires */\n// Copyright 2019-2020 @polkadot/wasm-crypto authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\nconst pkg = require('./package.json');\n\nconst asm = require('./wasm_asm_stub');\n\nconst bytes = require('./wasm_wasm');\n\nconst imports = require('./wasm');\n\nmodule.exports = async function createExportPromise() {\n  try {\n    const {\n      instance\n    } = await WebAssembly.instantiate(bytes, {\n      './wasm': imports\n    });\n    return instance.exports;\n  } catch (error) {\n    // if we have a valid supplied asm.js, return that\n    if (asm && asm.ext_blake2b) {\n      return asm;\n    }\n\n    console.error(`ERROR: Unable to initialize ${pkg.name} ${pkg.version}`);\n    console.error(error);\n    return null;\n  }\n};","map":null,"metadata":{},"sourceType":"script"}