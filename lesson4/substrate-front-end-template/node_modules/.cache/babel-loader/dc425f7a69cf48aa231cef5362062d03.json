{"ast":null,"code":"var _jsxFileName = \"/Users/binggao/Documents/GitHub/team2/lesson4/substrate-front-end-template/src/AccountSelector.js\";\nimport React, { useState, useEffect } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { Menu, Button, Dropdown, Container, Icon, Image, Label } from 'semantic-ui-react';\nimport { useSubstrate } from './substrate-lib';\n\nfunction Main(props) {\n  const {\n    keyring\n  } = useSubstrate();\n  const {\n    setAccountAddress\n  } = props;\n  const [accountSelected, setAccountSelected] = useState(''); // Get the list of accounts we possess the private key for\n\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n  const initialAddress = keyringOptions.length > 0 ? keyringOptions[0].value : ''; // Set the initial address\n\n  useEffect(() => {\n    setAccountAddress(initialAddress);\n    setAccountSelected(initialAddress);\n  }, [setAccountAddress, initialAddress]);\n\n  const onChange = address => {\n    // Update state with new account address\n    setAccountAddress(address);\n    setAccountSelected(address);\n  };\n\n  return React.createElement(Menu, {\n    attached: \"top\",\n    tabular: true,\n    style: {\n      backgroundColor: '#fff',\n      borderColor: '#fff',\n      paddingTop: '1em',\n      paddingBottom: '1em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(Menu.Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(Image, {\n    src: \"Substrate-Logo.png\",\n    size: \"mini\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })), React.createElement(Menu.Menu, {\n    position: \"right\",\n    style: {\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, !accountSelected ? React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Add your account with the\", ' ', React.createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"https://github.com/polkadot-js/extension\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Polkadot JS Extension\")) : null, React.createElement(CopyToClipboard, {\n    text: accountSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Button, {\n    basic: true,\n    circular: true,\n    size: \"large\",\n    icon: \"users\",\n    color: accountSelected ? 'green' : 'red',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })), React.createElement(Dropdown, {\n    search: true,\n    selection: true,\n    clearable: true,\n    placeholder: \"Select an account\",\n    options: keyringOptions,\n    onChange: (_, dropdown) => {\n      onChange(dropdown.value);\n    },\n    value: accountSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(BalanceAnnotation, {\n    accountSelected: accountSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }))));\n}\n\nfunction BalanceAnnotation(props) {\n  const {\n    accountSelected\n  } = props;\n  const {\n    api\n  } = useSubstrate();\n  const [accountBalance, setAccountBalance] = useState(0); // When account address changes, update subscriptions\n\n  useEffect(() => {\n    let unsubscribe; // If the user has selected an address, create a new subscription\n\n    accountSelected && api.query.system.account(accountSelected, balance => {\n      setAccountBalance(balance.data.free.toHuman());\n    }).then(unsub => {\n      unsubscribe = unsub;\n    }).catch(console.error);\n    return () => unsubscribe && unsubscribe();\n  }, [api, accountSelected]);\n  return accountSelected ? React.createElement(Label, {\n    pointing: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    name: \"money\",\n    color: \"green\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), accountBalance) : null;\n}\n\nexport default function AccountSelector(props) {\n  const {\n    api,\n    keyring\n  } = useSubstrate();\n  return keyring.getPairs && api.query ? React.createElement(Main, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })) : null;\n}","map":{"version":3,"sources":["/Users/binggao/Documents/GitHub/team2/lesson4/substrate-front-end-template/src/AccountSelector.js"],"names":["React","useState","useEffect","CopyToClipboard","Menu","Button","Dropdown","Container","Icon","Image","Label","useSubstrate","Main","props","keyring","setAccountAddress","accountSelected","setAccountSelected","keyringOptions","getPairs","map","account","key","address","value","text","meta","name","toUpperCase","icon","initialAddress","length","onChange","backgroundColor","borderColor","paddingTop","paddingBottom","alignItems","_","dropdown","BalanceAnnotation","api","accountBalance","setAccountBalance","unsubscribe","query","system","balance","data","free","toHuman","then","unsub","catch","console","error","AccountSelector"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n  Menu,\n  Button,\n  Dropdown,\n  Container,\n  Icon,\n  Image,\n  Label\n} from 'semantic-ui-react';\n\nimport { useSubstrate } from './substrate-lib';\n\nfunction Main (props) {\n  const { keyring } = useSubstrate();\n  const { setAccountAddress } = props;\n  const [accountSelected, setAccountSelected] = useState('');\n\n  // Get the list of accounts we possess the private key for\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n\n  const initialAddress =\n    keyringOptions.length > 0 ? keyringOptions[0].value : '';\n\n  // Set the initial address\n  useEffect(() => {\n    setAccountAddress(initialAddress);\n    setAccountSelected(initialAddress);\n  }, [setAccountAddress, initialAddress]);\n\n  const onChange = address => {\n    // Update state with new account address\n    setAccountAddress(address);\n    setAccountSelected(address);\n  };\n\n  return (\n    <Menu\n      attached='top'\n      tabular\n      style={{\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        paddingTop: '1em',\n        paddingBottom: '1em'\n      }}\n    >\n      <Container>\n        <Menu.Menu>\n          <Image src='Substrate-Logo.png' size='mini' />\n        </Menu.Menu>\n        <Menu.Menu position='right' style={{ alignItems: 'center' }}>\n          { !accountSelected\n            ? <span>\n              Add your account with the{' '}\n              <a\n                target='_blank'\n                rel='noopener noreferrer'\n                href='https://github.com/polkadot-js/extension'\n              >\n                Polkadot JS Extension\n              </a>\n            </span>\n            : null }\n          <CopyToClipboard text={accountSelected}>\n            <Button\n              basic\n              circular\n              size='large'\n              icon='users'\n              color={accountSelected ? 'green' : 'red'}\n            />\n          </CopyToClipboard>\n          <Dropdown\n            search\n            selection\n            clearable\n            placeholder='Select an account'\n            options={keyringOptions}\n            onChange={(_, dropdown) => {\n              onChange(dropdown.value);\n            }}\n            value={accountSelected}\n          />\n          <BalanceAnnotation accountSelected={accountSelected} />\n        </Menu.Menu>\n      </Container>\n    </Menu>\n  );\n}\n\nfunction BalanceAnnotation (props) {\n  const { accountSelected } = props;\n  const { api } = useSubstrate();\n  const [accountBalance, setAccountBalance] = useState(0);\n\n  // When account address changes, update subscriptions\n  useEffect(() => {\n    let unsubscribe;\n\n    // If the user has selected an address, create a new subscription\n    accountSelected &&\n      api.query.system.account(accountSelected, balance => {\n        setAccountBalance(balance.data.free.toHuman());\n      })\n        .then(unsub => {\n          unsubscribe = unsub;\n        })\n        .catch(console.error);\n\n    return () => unsubscribe && unsubscribe();\n  }, [api, accountSelected]);\n\n  return accountSelected ? (\n    <Label pointing='left'>\n      <Icon name='money' color='green' />\n      {accountBalance}\n    </Label>\n  ) : null;\n}\n\nexport default function AccountSelector (props) {\n  const { api, keyring } = useSubstrate();\n  return keyring.getPairs && api.query ? <Main {...props} /> : null;\n}\n"]},"metadata":{},"sourceType":"module"}