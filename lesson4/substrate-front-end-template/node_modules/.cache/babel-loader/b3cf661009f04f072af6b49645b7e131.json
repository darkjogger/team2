{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proposals = proposals;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\n\n\nfunction parse([hashes, proposals, votes]) {\n  return proposals.map((proposalOpt, index) => proposalOpt.isSome ? {\n    hash: hashes[index],\n    proposal: proposalOpt.unwrap(),\n    votes: votes[index].unwrapOr(null)\n  } : null).filter(proposal => !!proposal);\n}\n\nfunction proposals(api, section) {\n  return (0, _util2.memo)(() => {\n    var _api$query$section;\n\n    return (0, _util.isFunction)((_api$query$section = api.query[section]) === null || _api$query$section === void 0 ? void 0 : _api$query$section.proposals) ? api.query[section].proposals().pipe((0, _operators.switchMap)(hashes => hashes.length ? (0, _rxjs.combineLatest)([(0, _rxjs.of)(hashes), api.query[section].proposalOf.multi(hashes), api.query[section].voting.multi(hashes)]) : (0, _rxjs.of)([[], [], []])), (0, _operators.map)(parse)) : (0, _rxjs.of)([]);\n  });\n}","map":null,"metadata":{},"sourceType":"script"}